---
// Screenshot Carousel Component
---

<div class="relative animate-float">
  <!-- Glow effect -->
  <div class="absolute inset-0 glow-pink rounded-2xl"></div>
  
  <!-- Carousel Container -->
  <div class="relative overflow-hidden rounded-2xl">
    <!-- Screenshots -->
    <div id="carousel-track" class="relative">
      <img 
        src="/assets/screenshots/the_ride.png" 
        alt="ENDURE - Live Ride View" 
        data-zoomable
        class="carousel-slide active w-full rounded-2xl shadow-2xl border border-white/10 cursor-zoom-in hover:shadow-pink-500/20 transition-shadow"
      />
      <img 
        src="/assets/screenshots/2026-01-14 10_18_41-Endure.png" 
        alt="ENDURE - Dashboard Analysis" 
        data-zoomable
        class="carousel-slide w-full rounded-2xl shadow-2xl border border-white/10 cursor-zoom-in hover:shadow-pink-500/20 transition-shadow"
      />
      <img 
        src="/assets/screenshots/import_workouts.png" 
        alt="ENDURE - Import Workouts" 
        data-zoomable
        class="carousel-slide w-full rounded-2xl shadow-2xl border border-white/10 cursor-zoom-in hover:shadow-pink-500/20 transition-shadow"
      />
    </div>
    
    <!-- Navigation Arrows -->
    <button id="prev-slide" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full backdrop-blur-sm transition-all z-10" aria-label="Previous">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <button id="next-slide" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full backdrop-blur-sm transition-all z-10" aria-label="Next">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
  
  <!-- Dots Indicator -->
  <div class="flex justify-center gap-2 mt-6">
    <button class="carousel-dot active w-3 h-3 rounded-full bg-[#F05D23] transition-all" data-slide="0" aria-label="Slide 1"></button>
    <button class="carousel-dot w-3 h-3 rounded-full bg-white/30 hover:bg-white/50 transition-all" data-slide="1" aria-label="Slide 2"></button>
    <button class="carousel-dot w-3 h-3 rounded-full bg-white/30 hover:bg-white/50 transition-all" data-slide="2" aria-label="Slide 3"></button>
  </div>
</div>

<style>
  .carousel-slide {
    display: none;
    opacity: 0;
    transition: opacity 0.6s ease-in-out;
  }
  
  .carousel-slide.active {
    display: block;
    opacity: 1;
  }
  
  .carousel-dot.active {
    transform: scale(1.2);
  }
</style>

<script>
  const slides = document.querySelectorAll('.carousel-slide');
  const dots = document.querySelectorAll('.carousel-dot');
  const prevBtn = document.getElementById('prev-slide');
  const nextBtn = document.getElementById('next-slide');
  const track = document.getElementById('carousel-track');
  
  let currentSlide = 0;
  let autoplayInterval: number;
  let isPaused = false;
  
  function showSlide(index: number) {
    // Wrap around
    if (index >= slides.length) currentSlide = 0;
    else if (index < 0) currentSlide = slides.length - 1;
    else currentSlide = index;
    
    // Update slides
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === currentSlide);
    });
    
    // Update dots
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === currentSlide);
      if (i === currentSlide) {
        dot.classList.remove('bg-white/30');
        dot.classList.add('bg-[#F05D23]');
      } else {
        dot.classList.remove('bg-[#F05D23]');
        dot.classList.add('bg-white/30');
      }
    });
  }
  
  function nextSlide() {
    showSlide(currentSlide + 1);
  }
  
  function prevSlide() {
    showSlide(currentSlide - 1);
  }
  
  function startAutoplay() {
    autoplayInterval = window.setInterval(nextSlide, 5000);
  }
  
  function stopAutoplay() {
    clearInterval(autoplayInterval);
  }
  
  // Navigation
  nextBtn?.addEventListener('click', () => {
    nextSlide();
    stopAutoplay();
    startAutoplay();
  });
  
  prevBtn?.addEventListener('click', () => {
    prevSlide();
    stopAutoplay();
    startAutoplay();
  });
  
  // Dots navigation
  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      showSlide(index);
      stopAutoplay();
      startAutoplay();
    });
  });
  
  // Pause on hover
  track?.addEventListener('mouseenter', stopAutoplay);
  track?.addEventListener('mouseleave', () => {
    if (!isPaused) startAutoplay();
  });
  
  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') prevSlide();
    if (e.key === 'ArrowRight') nextSlide();
  });
  
  // Touch/Swipe support
  let touchStartX = 0;
  let touchEndX = 0;
  
  track?.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  });
  
  track?.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });
  
  function handleSwipe() {
    if (touchStartX - touchEndX > 50) nextSlide();
    if (touchEndX - touchStartX > 50) prevSlide();
  }
  
  // Start autoplay
  startAutoplay();
</script>
